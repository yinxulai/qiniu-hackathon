# 产品文档

## 产品定位

一个可以通过语音来控制操作电脑的智能工具，支持结合多种能力执行复杂任务。

## 应用场景

- 

### 应用示例

- 帮我搜索上海虹桥站地址
- 帮我整理桌面的照片，按照片拍摄所在地自动分组并命名，命名为拍摄地地址
- 帮我使用百度地图规划上海虹桥站到任一照片拍摄所在地的线路


## 功能特性

### 核心能力

#### 🗺️ 地理信息服务

- 智能地址搜索与识别
- 多平台路线规划与导航
- 地理位置信息提取与分析

#### 📁 文件智能管理

- 基于时间、地点的文件分类整理
- 照片地理位置自动识别与分组
- 文档内容智能检索与归档

#### 🎯 复杂任务协调

- 跨应用程序任务编排
- 上下文感知的任务链执行
- 多步骤任务状态跟踪与管理

### 交互特性

#### 🎙️ 多模态交互

- 自然语音对话控制
- 文字指令精确输入
- 语音与文字无缝切换

#### 🧠 智能理解

- 上下文感知与记忆
- 任务意图智能识别
- 交叉任务自动关联

#### 🔄 实时反馈

- 任务执行进度可视化
- 步骤状态实时更新
- 异常情况智能处理

### MCP 生态系统

#### 🔧 核心架构

- **MCP 管理器**: 自动环境安装与配置
- **运行时管理**: 动态加载与资源调度
- **插件热更新**: 无需重启的功能扩展

#### 🌐 开放生态

通过 MCP (Model Context Protocol) 组件化架构，本系统具备强大的扩展能力：

**地图服务扩展示例**:

```text
当前支持: 百度地图 (通过浏览器MCP)
扩展方案: 
├── 高德地图MCP组件
├── 腾讯地图MCP组件  
├── Google Maps MCP组件
└── 自定义地图服务MCP

快速接入流程:
1. 开发对应地图API的MCP组件
2. 在MCP管理器中注册新组件
3. 系统自动识别并调用最适合的地图服务
```

**组件扩展优势**:

- **即插即用**: 新MCP组件零配置接入
- **智能选择**: 系统根据用户偏好和任务需求自动选择最佳服务
- **并行支持**: 同时支持多个同类服务，提供备选方案
- **社区共建**: 开发者可贡献MCP组件，丰富生态

#### 已集成MCP组件

- **[浏览器操作]** @playwright/mcp - 网页自动化与信息抓取
- **[桌面控制]** swift-mcp-gui - 系统级UI操作与控制

#### 待扩展MCP组件

- 高德地图MCP - 提供备选路线规划
- 腾讯地图MCP - 增强POI搜索能力
- 文件系统MCP - 深度文件操作支持
- 图像识别MCP - 增强视觉内容理解

### 技术要求

#### 模型能力

- 多模态内容识别与理解
- 地理位置信息提取
- 复杂任务分解与编排


## 功能使用

### 使用流程

1. 唤醒 NAME
2. 文字或语音输入指令
3. 查看执行结果

### 交互流程设计

#### 1. 语音唤醒 NAME

- **唤醒成功**：展示对话界面，NAME 头像出现并语音提示"在呢"
- **唤醒失败**：界面保持原状，无任何反应

#### 2. 指令输入

支持两种输入方式：

- **文字输入**：在对话框中输入文字，按回车发送指令
- **语音输入**：点击语音按钮后开始录音
  - 实时语音转文字显示在输入框中
  - 语音停顿超过 5 秒自动结束并发送指令
  - 可通过"取消"指令或点击终止按钮中断录音

#### 3. 任务执行与显示

接收指令后，系统在「任务分解面板」中展示任务执行过程：

**任务概览区域**：

- 任务标题：简要概括任务目标
- 任务状态：🟡 进行中 / 🔴 已终止 / ✅ 已完成
- 任务描述：详细说明执行要点和预期结果

**执行步骤区域**：

- 步骤描述：显示序列和各个执行步骤的简述
- 步骤状态：进行中的显示为序列号/ 已完成的打勾标记

#### 4. 任务控制

在任务执行过程中可以进行以下操作：

**终止任务**：

- 语音或文字输入"终止"指令
- 当前任务立即停止，状态变更为「已终止」

**追加指令**：

根据当前任务状态有不同的处理方式：

- **进行中任务**：未执行步骤置灰，插入新的执行步骤
- **已完成任务**：任务状态重新变为「进行中」，添加新的执行步骤
- **已终止任务**：不支持追加，需重新发起新任务

#### 5. 任务与指令类型识别

**子任务判断标准**：

- 使用延续性词汇：「然后」「接着」「再」「另外」
- 明确的补充意图：「补充一下」「追加」「还需要」
- 基于当前任务结果的进一步操作

**新任务判断标准**：

- 使用新任务标识词：「重新」「新建」「开始新的」
- 明确表示与当前任务无关的独立需求

**智能识别机制**：

- 系统自动分析指令语义和上下文关联度
- 不确定时提示用户确认：「这是要追加到当前任务还是开始新任务？」 //对话？可以先没有

#### 6. 历史记录管理

- 「已终止」或「已完成」的任务自动归档到历史记录
- 历史记录显示：任务标题、完成时间、子任务数量
- 支持查看和恢复历史任务

#### 7. NAME 其他状态

- **任务完成展示结果时**：NAME 缩略为小图标，节省界面空间
- **接收"关闭"指令**：NAME 进入休眠状态，所有进行中任务自动终止
